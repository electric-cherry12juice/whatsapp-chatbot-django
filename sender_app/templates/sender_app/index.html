<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WhatsApp Message Sender</title>
    <!-- Using Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans">
    <div class="container mx-auto max-w-lg p-6">
        <div class="bg-white rounded-lg shadow-lg p-8">
            <h1 class="text-2xl font-bold text-gray-800 mb-6 text-center">Send WhatsApp Message</h1>

            <!-- Form to send a message -->
            <form action="{% url 'send_message' %}" method="post">
                {% csrf_token %}
                <div class="mb-4">
                    <label for="to_number" class="block text-gray-700 text-sm font-bold mb-2">Recipient Phone Number:</label>
                    <input type="text" name="to_number" id="to_number" required class="shadow appearance-none border rounded-md w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="e.g., 15550001234">
                </div>

                <!-- Radio buttons to select message type -->
                <div class="mb-4">
                    <span class="block text-gray-700 text-sm font-bold mb-2">Message Type:</span>
                    <div class="flex items-center space-x-4">
                        <label class="inline-flex items-center">
                            <input type="radio" name="message_type" value="text" checked onchange="toggleInputs()">
                            <span class="ml-2">Text</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="message_type" value="template" onchange="toggleInputs()">
                            <span class="ml-2">Template</span>
                        </label>
                    </div>
                </div>

                <!-- Input for a regular text message -->
                <div id="text-input-group" class="mb-4">
                    <label for="message_text" class="block text-gray-700 text-sm font-bold mb-2">Message:</label>
                    <textarea name="message_text" id="message_text" rows="4" required class="shadow appearance-none border rounded-md w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Type your message here..."></textarea>
                </div>

                <!-- Input for a template message -->
                <div id="template-input-group" class="mb-4 hidden">
                    <label for="template_name" class="block text-gray-700 text-sm font-bold mb-2">Template Name:</label>
                    <input type="text" name="template_name" id="template_name" class="shadow appearance-none border rounded-md w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="e.g., hello_world">
                </div>

                <div class="flex items-center justify-center">
                    <button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg focus:outline-none focus:shadow-outline transition duration-300">
                        Send Message
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- JavaScript to toggle between text and template input fields -->
    <script>
        function toggleInputs() {
            const messageType = document.querySelector('input[name="message_type"]:checked').value;
            const textGroup = document.getElementById('text-input-group');
            const templateGroup = document.getElementById('template-input-group');
            const textInput = document.getElementById('message_text');
            const templateInput = document.getElementById('template_name');

            if (messageType === 'text') {
                textGroup.classList.remove('hidden');
                templateGroup.classList.add('hidden');
                textInput.required = true;
                templateInput.required = false;
            } else {
                textGroup.classList.add('hidden');
                templateGroup.classList.remove('hidden');
                textInput.required = false;
                templateInput.required = true;
            }
        }
        // Run on page load to set the correct initial state.
        document.addEventListener('DOMContentLoaded', toggleInputs);
    </script>
</body>
</html>